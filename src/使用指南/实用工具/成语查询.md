---
title: 成语查询
icon: 
order: 1
---

# 成语查询

## 概述

**指令名称**: 成语查询

**功能描述**: 查询成语含义、出处、用法和示例，支持精确查询和模糊匹配

**插件名称**: idiom-dictionary

## 架构图

```mermaid
flowchart LR
    U[用户]
    
    subgraph Linux
        subgraph A [QQ客户端]
            QQ[QQ]
        end

        subgraph Nodejs [Node.js Runtime]
            subgraph B [Napcat服务]
                N[Napcat]
            end

            subgraph C [Koishi框架]
                K[Koishi]
                AO[adapter-onebot]
                OT[idiom-dictionary]
                PP[puppeteer]
            end
        end

        subgraph D [独立Chrome服务]
            CH[Chrome<br>渲染引擎]
        end
    end

    U --> QQ
    QQ -- "① 消息/事件" --> N
    N -- "② OneBot v11协议" --> K
    
    K -- "③ 协议解析" --> AO
    AO -- "④ 事件传递" --> K
    K -- "⑤ 调用idiom-dictionary插件" --> OT
    OT -- "⑥ 返回给Koishi" --> K
    K -- "⑦ 调用puppeteer插件" --> PP
    PP -- "⑧ 远程调用" --> CH
    CH -- "⑨ 返回渲染结果" --> PP
    PP -- "⑩ 返回给Koishi" --> K
    K -- "⑪ 返回结果给idiom-dictionary" --> OT
    OT -- "⑫ 最终处理完成" --> K
    K -- "⑬ 业务处理" --> AO
    AO -- "⑭ 响应封装" --> K
    K -- "⑮ OneBot v11协议" --> N
    
    N -- "⑯ 响应消息" --> QQ
    QQ -- "⑰ 显示结果" --> U
```

## 使用方法

### 基本语法

```
成语查询 <成语>
近义词查询 <词语>
反义词查询 <词语>
```

### 参数说明

| 参数 | 类型 | 必填 | 说明 | 示例 |
|------|------|------|------|------|
| 成语 | 文本 | 是 | 要查询的成语，支持使用?进行模糊匹配 | 一帆风顺 |
| 词语 | 文本 | 是 | 要查询近义词或反义词的词语 | 美丽 |

## 使用示例

### 成语精确查询

#### 查询成语 `一帆风顺`
<chat-panel>
<chat-message nickname="用户" type="user">成语查询 一帆风顺</chat-message>
<chat-message nickname="bot" type="bot">

![](./成语查询_一帆风顺.png)
</chat-message>
</chat-panel>

### 成语模糊查询

#### 模糊查询 `?帆??`
<chat-panel>
<chat-message nickname="用户" type="user">成语查询 ?帆??</chat-message>
<chat-message nickname="bot" type="bot">

![](./成语查询_帆.png)
</chat-message>
</chat-panel>

### 近义词查询

#### 查询词语 `美丽` 的近义词
<chat-panel>
<chat-message nickname="用户" type="user">近义词查询 美丽</chat-message>
<chat-message nickname="bot" type="bot">

![](./成语查询_美丽.png)
</chat-message>
</chat-panel>

### 反义词查询

#### 查询词语 `美丽` 的反义词
<chat-panel>
<chat-message nickname="用户" type="user">反义词查询 美丽</chat-message>
<chat-message nickname="bot" type="bot">

![](./成语查询_美丽2.png)
</chat-message>
</chat-panel>

## 技术特性

### 支持的查询类型
- **精确查询**: 直接查询完整成语的详细释义
- **模糊查询**: 使用?作为通配符进行位置匹配查询
- **近义词查询**: 查询词语的近义词及解释
- **反义词查询**: 查询词语的反义词及解释

### 输出模式
- **文本模式**: 默认输出纯文本结果
- **图片模式**: 启用puppeteer服务后可输出渲染图片

### 自动处理
- **问号处理**: 自动将?和？统一处理为通配符
- **长度验证**: 自动验证成语是否为四字成语
- **结果限制**: 可配置最大返回结果数量

## 配置参数

插件支持以下配置选项：

| 配置项 | 类型 | 默认值 | 说明 |
|--------|------|--------|------|
| Maximumidiom | number | 10 | 返回成语的最大数量限制 |
| MaximumnearSynonyms | number | 5 | 返回近义词/反义词的最大数量限制 |
| imagifyoutput | boolean | false | 图片输出模式（需要puppeteer服务） |
| consoleinfo | boolean | false | 日志调试模式 |

## 注意事项

1. **成语长度**: 成语查询仅支持四字成语，未知字可用?代替
2. **模糊查询**: 近义词和反义词查询不支持模糊查询
3. **网络要求**: 需要网络连接访问汉语国学网
4. **图片模式**: 图片输出需要安装并配置puppeteer服务
5. **查询限制**: 模糊查询结果数量受Maximumidiom配置限制

## 错误处理

- **输入不完整**: 当输入为空或包含问号时提示
- **未找到结果**: 当查询无匹配结果时提示
- **查询失败**: 当网络或服务异常时提示
- **长度错误**: 当输入不是四字成语时提示

::: tip
成语查询插件基于[汉语国学网](https://www.hanyuguoxue.com)的权威数据，提供准确的成语释义、出处和用法说明。支持模糊查询功能，可以帮助用户在不记得完整成语时进行查找。
:::
