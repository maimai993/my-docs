---
title: 股票
icon: 
order: 1
---

# 股票

## 概述
[![](https://img.shields.io/badge/框架-GsCore-af9183?style=flat)](https://github.com/Genshin-bots/gsuid_core) [![](https://img.shields.io/badge/-github-202020?style=flat&logo=github)](https://github.com/KimigaiiWuyi/SayuStock)

**功能描述**: 基于GsCore的全功能股票/A股机器人插件，支持大盘云图、个股查询、自选管理、新闻订阅等功能

**插件名称**: SayuStock


## 架构图

```mermaid
flowchart LR
    U[用户]
    
    subgraph Linux
        subgraph A [QQ客户端]
            QQ[QQ]
        end

            subgraph B [Napcat服务]
                N[Napcat]
            end

            subgraph C [Koishi框架]
                K[GsCore]
                AO[adapter-onebot]
                EM[SayuStock]
            end
        end
    end

    U --> QQ
    QQ -- "① 消息/事件" --> N
    N -- "② OneBot v11协议" --> K
    
    K -- "③ 协议解析" --> AO
    AO -- "④ 事件传递" --> K
    K -- "⑤ 调用插件" --> EM
    EM -- "⑥ 检查emoji组合" --> EM
    EM -- "⑦ 生成合成图片" --> EM
    EM -- "⑧ 返回合成图片" --> K
    K -- "⑨ 业务处理" --> AO
    AO -- "⑩ 响应封装" --> K
    K -- "⑪ OneBot v11协议" --> N
    
    N -- "⑫ 响应消息" --> QQ
    QQ -- "⑬ 显示合成emoji" --> U
```

## 使用方法

### 基本语法

```
大盘概览
大盘云图 [类型]
行业云图 [行业名称]
概念云图 [概念名称]
个股 <股票代码/名称> [K线类型]
我的个股
我的自选
全天候
对比个股 <股票代码1> <股票代码2> ...
添加自选 <股票代码/名称>
删除自选 <股票代码/名称>
基金持仓 <基金代码>
市盈率对比 <股票代码>
```

### 主要指令说明

| 指令 | 参数 | 必填 | 说明 | 示例 |
|------|------|------|------|------|
| 大盘概览 | 无 | 是 | 显示大盘概览信息 | 大盘概览 |
| 大盘云图 | 类型 | 否 | 显示大盘云图，可选：港股、美股 | 大盘云图 港股 |
| 行业云图 | 行业名称 | 是 | 显示指定行业的云图 | 行业云图 半导体 |
| 概念云图 | 概念名称 | 是 | 显示指定概念的云图 | 概念云图 白酒 |
| 个股 | 股票代码 | 是 | 查询个股信息 | 个股 沪深300 |
| 我的个股 | 无 | 是 | 显示用户自选的个股信息 | 我的个股 |
| 我的自选 | 无 | 是 | 显示用户的自选列表 | 我的自选 |
| 全天候 | 无 | 是 | 显示全天候板块信息 | 全天候 |
| 对比个股 | 股票代码列表 | 是 | 对比多个股票走势 | 对比个股 A500 沪深300 |
| 添加自选 | 股票代码 | 是 | 添加股票到自选 | 添加自选 中证白酒 |
| 删除自选 | 股票代码 | 是 | 从自选删除股票 | 删除自选 中证白酒 |
| 基金持仓 | 基金代码 | 是 | 显示基金持仓分布 | 基金持仓 510300 |
| 市盈率对比 | 股票代码 | 是 | 显示市盈率对比图 | 市盈率对比 贵州茅台 |

### K线类型选项

| 选项 | 说明 | 示例 |
|------|------|------|
| 5k | 5分钟K线 | 个股 沪深300 5k |
| 15k | 15分钟K线 | 个股 沪深300 15k |
| 30k | 30分钟K线 | 个股 沪深300 30k |
| 60k | 60分钟K线 | 个股 沪深300 60k |
| 日k | 日K线 | 个股 沪深300 日k |
| 周k | 周K线 | 个股 沪深300 周k |
| 月k | 月K线 | 个股 沪深300 月k |
| 年k | 年K线 | 个股 沪深300 年k |

### 时间范围选项（对比个股）

| 选项 | 说明 | 示例 |
|------|------|------|
| 年初至今 | 从今年年初开始对比 | 对比个股 年初至今 中证白酒 中证2000 |
| 最近一年 | 最近一年数据对比 | 对比个股 最近一年 中证白酒 中证2000 |
| 最近一月 | 最近一月数据对比 | 对比个股 最近一月 中证白酒 中证2000 |
| 自定义日期 | 指定日期范围 | 对比个股 2024.01.01-2024.12.31 中证白酒 |

## 使用示例

### 基本查询

#### 查询大盘概览
<chat-panel>
<chat-message nickname="用户" type="user">大盘概览</chat-message>
<chat-message nickname="bot" type="bot">

![](https://s2.loli.net/2025/01/22/GCip3KMlLjASnsV.jpg)
</chat-message>
</chat-panel>

#### 查询个股信息
<chat-panel>
<chat-message nickname="用户" type="user">个股 沪深300</chat-message>
<chat-message nickname="bot" type="bot">

![](https://s2.loli.net/2025/08/04/AQPOKB9T2WwU5sf.png)
</chat-message>
</chat-panel>

### 云图功能

#### 查看大盘云图
<chat-panel>
<chat-message nickname="用户" type="user">大盘云图</chat-message>
<chat-message nickname="bot" type="bot">

![](https://s2.loli.net/2024/11/26/qvMG1ers7pITSUZ.jpg)
</chat-message>
</chat-panel>

#### 查看行业云图
<chat-panel>
<chat-message nickname="用户" type="user">行业云图 半导体</chat-message>
<chat-message nickname="bot" type="bot">

![](https://s2.loli.net/2025/01/22/vsUthKeZk3TEfxR.png)
</chat-message>
</chat-panel>

### 自选管理

#### 添加自选
<chat-panel>
<chat-message nickname="用户" type="user">添加自选 中证白酒</chat-message>
<chat-message nickname="bot" type="bot">
是否确认将下列股票添加自选?
中证白酒(512690)
请输入是或否。
</chat-message>
<chat-message nickname="用户" type="user">是</chat-message>
<chat-message nickname="bot" type="bot">
✅[SayuStock] 添加自选成功!
可发送[我的自选]查看或发送[删除自选]清除！
</chat-message>
</chat-panel>

#### 查看我的自选
<chat-panel>
<chat-message nickname="用户" type="user">我的自选</chat-message>
<chat-message nickname="bot" type="bot">

![](https://s2.loli.net/2025/02/23/k1AOeTfxtPZHluo.jpg)
</chat-message>
</chat-panel>

### 高级功能

#### 对比个股
<chat-panel>
<chat-message nickname="用户" type="user">对比个股 A500 沪深300 上证指数 中证白酒</chat-message>
<chat-message nickname="bot" type="bot">

![](https://s2.loli.net/2025/06/02/a41cqb2rGzTvSWy.png)
</chat-message>
</chat-panel>

#### 查看K线图
<chat-panel>
<chat-message nickname="用户" type="user">个股 东方财富 日k</chat-message>
<chat-message nickname="bot" type="bot">

![](https://s2.loli.net/2025/05/16/Mlz5qEyKBe16SdR.png)
</chat-message>
</chat-panel>

## 技术特性

### 支持的数据类型
- **A股**: 沪深主板、创业板、科创板
- **指数**: 上证指数、深证成指、创业板指等
- **ETF**: 各类交易型开放式指数基金
- **基金**: 公募基金持仓信息
- **港股**: 香港交易所股票
- **美股**: 美国交易所股票（通过VIX）

### 自动处理
- **数据更新**: 实时获取最新股票数据
- **图片生成**: 自动生成美观的数据可视化图表
- **缓存管理**: 智能缓存减少API调用
- **错误重试**: 网络异常时自动重试

### 数据源
- **东方财富**: 主要数据源，提供实时行情
- **新浪财经**: 市盈率等基本面数据
- **雪球**: 新闻和热点信息
- **自有API**: 插件内置的数据处理服务

## 注意事项

1. **数据延迟**: 股票数据有15分钟左右的延迟，非实时数据
2. **API限制**: 频繁请求可能触发API限制，请合理使用
3. **网络要求**: 需要稳定的网络连接来获取数据
4. **图片大小**: 生成的图片可能较大，部分平台可能压缩
5. **自选限制**: 单个用户自选股票数量有限制
6. **管理员功能**: 新闻订阅功能仅限管理员使用

## 配置参数

插件支持以下配置选项（通过GsCore配置）：

| 配置项 | 类型 | 默认值 | 说明 |
|--------|------|--------|------|
| cache_timeout | number | 300秒 | 数据缓存时间 |
| max_favorites | number | 20 | 最大自选股票数量 |
| image_quality | string | high | 图片质量（high/medium/low） |
| auto_clean_cache | boolean | true | 是否自动清理缓存 |
| news_check_interval | number | 5分钟 | 新闻检查间隔 |

::: tip
SayuStock插件基于GsCore框架开发，能够无缝集成到多种机器人平台。插件使用playwright进行网页渲染，plotly进行数据可视化，pandas进行数据处理，确保功能的稳定性和美观性。
:::

::: warning
本插件仅供学习和研究使用，不构成任何投资建议。股市有风险，投资需谨慎。
:::
